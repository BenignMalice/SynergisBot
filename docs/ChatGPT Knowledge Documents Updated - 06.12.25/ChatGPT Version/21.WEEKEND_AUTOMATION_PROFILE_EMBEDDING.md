
# üß† 21.WEEKEND_AUTOMATION_PROFILE_EMBEDDING_v3.md
**Title:** BTC Weekend Automation & Volatility-Adjusted Execution Framework  
**Purpose:** Define automated system behavior, strategy filters, and confluence/volatility logic for weekend BTCUSDc trading (Fri 23:00 ‚Üí Mon 03:00 UTC).  
**Scope:** Overrides London Breakout and Trend modules during inactive institutional sessions.  
**Applies To:** BTCUSDc ONLY (XAUUSDc markets are CLOSED on weekends)  

## ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è CRITICAL: WEEKEND DETECTION - READ FIRST ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è

**When analyzing BTCUSDc, you MUST:**
1. **Check the timestamp** in the analysis response (look for "üïí Data as of" or "Data as of: YYYY-MM-DD HH:MM UTC")
2. **Determine if it's weekend**: Friday 23:00+ UTC, Saturday, Sunday, or Monday < 03:00 UTC = WEEKEND
3. **EXAMPLE**: "2025-12-13 15:06 UTC" = Saturday 15:06 UTC = **WEEKEND HOURS**
4. **If weekend detected**, you MUST activate weekend mode and follow ALL weekend rules below
5. **Display "‚ö†Ô∏è WEEKEND TRADING MODE ACTIVE"** as the FIRST line of your response

**Depends On:**  
- 8.VOLATILITY_REGIME_STRATEGIES_EMBEDDING.md  
- 10.SMC_MASTER_EMBEDDING.md  
- 11.SCALPING_STRATEGIES_EMBEDDING.md  
- 12.SYMBOL_GUIDE_EMBEDDING.md  
- 6.AUTO_EXECUTION_CHATGPT_INSTRUCTIONS_EMBEDDING.md  
- 7.AUTO_EXECUTION_CHATGPT_KNOWLEDGE_EMBEDDED.md  
- 20.ORDER_FLOW_AND_ABSORPTION_FRAMEWORK_EMBEDDING.md

---

## üïí 1Ô∏è‚É£ ACTIVE WINDOW
Active_Days: [Friday (23:00 UTC) ‚Üí Monday (03:00 UTC)]  
Applies_To_Symbols: [BTCUSDc]  
Auto_Session_Mode: "Weekend"

When this profile is active:
- Disables London Breakout and Trend Continuation Pullback strategies.
- Restricts execution to range, VWAP, and liquidity-based strategies.
- Engages ATR-based volatility filters and adaptive risk adjustments.

---

## ‚öôÔ∏è 2Ô∏è‚É£ VOLATILITY & REGIME CLASSIFICATION
Weekend volatility = Stable or Compressed Regime.

**ATR Baseline Definition:**
- Baseline = 14-period ATR average over previous 5 weekdays (Mon-Fri)
- Uses H1 timeframe for weekend volatility classification
- Calculated from most recent 5 weekdays before weekend starts
- Falls back to "cautious" if baseline unavailable

| ATR State | Action | Allowed Strategies |
|------------|---------|--------------------|
| ATR < 1.0 √ó baseline | Stable ‚Üí Range Play Mode | mean_reversion_range_scalp, vwap_reversion |
| ATR 1.0‚Äì1.3 √ó baseline | Cautious ‚Üí Micro-Scalp Mode | micro_scalp, vwap_reversion |
| ATR > 1.3 √ó baseline | High ‚Üí Wait for Sweep + CHOCH Confirmation | liquidity_sweep_reversal only |

### üîπ Volatility Curve Bias Integration
```yaml
Volatility_Curve_Bias:
  if atr_state == "stable": bias_confluence_weight: +10
  if atr_state == "expanding": bias_confluence_weight: -10
  if volatility_squeeze_detected: block_new_entries: true
```
Prevents false signals when weekend volatility suddenly expands after a lull by dynamically adjusting confluence weighting.

---

## üß© 3Ô∏è‚É£ STRATEGY FILTERS
Weekend trading operates under limited strategy family scope.

| Strategy Type | Enabled | Reason |
|----------------|----------|--------|
| mean_reversion_range_scalp | ‚úÖ | Best for tight weekend ranges |
| liquidity_sweep_reversal | ‚úÖ | Captures stop hunts |
| vwap_reversion | ‚úÖ | Targets equilibrium reversion |
| micro_scalp | ‚úÖ | Low-volatility precision entries |
| breakout_ib_volatility_trap | ‚ùå | False 80 % of weekends |
| trend_continuation_pullback | ‚ùå | Institutional trend absent |

---

## üéØ 4Ô∏è‚É£ EXECUTION CONDITIONS
Each auto-plan created under this profile should include (DEFAULT recommendations - all overridable):

```json
{
  "min_confluence": 70,  // DEFAULT weekend recommendation (can be lowered if user requests)
  "choch_confirmation": true,  // RECOMMENDED (can be overridden - user can request confluence-only)
  "vwap_alignment": true,  // RECOMMENDED (can be overridden - user can request confluence-only)
  "price_near": <entry>,
  "tolerance": <dynamic 100‚Äì150>,
  "session": "Weekend",
  "risk_adjustments": {"position_size_multiplier": 0.6, "stop_loss_multiplier": 1.2},
  "atr_state_sync": true  // RECOMMENDED "stable" or "cautious" (can be overridden)
}
```

**‚ö†Ô∏è CRITICAL: Condition Overrides**
- User can request "confluence-only" trades (no CHOCH/VWAP requirement)
- User can lower confluence threshold if explicitly requested
- User can override ATR state restrictions
- System applies defaults but respects explicit user overrides
- **‚ö†Ô∏è For confluence-only weekend plans, use NON-range strategies** (e.g., `vwap_reversion`, `liquidity_sweep_reversal`) - `mean_reversion_range_scalp` auto-adds `structure_confirmation`

---

## üí∞ 5Ô∏è‚É£ CME GAP REVERSION LOGIC
Adds CME gap awareness for BTCUSDc:
- Detects Sunday reopening gap vs Friday CME close (22:00 UTC Friday).
- Data sources: MT5 historical data (H1/M15) primary, Binance fallback.
- Gap > 0.5 % ‚Üí auto-create VWAP Deviation Reversion plan.
- BUY if gap down, SELL if gap up.
- Target: 80 % gap fill; SL beyond Friday range extreme.

### üîπ CME Gap Detection Parameters
```yaml
CME_Gap_Params:
  threshold_pct: 0.5
  reversion_target_pct: 0.8
  auto_entry_confluence: 70
  monitoring_timeframe: M15
  friday_close_source: "MT5 H1/M15 historical data"
  sunday_open_source: "MT5 current price or first Sunday H1 candle"
```

---

## üß† 6Ô∏è‚É£ ORDER FLOW FILTER
Weekend order flow simplification:
- Ignore CVD divergence < 1.5œÉ.
- Accept only absorption zones near VWAP/equal highs/lows.
- Filter out delta spikes < 2√ó baseline.
- Confirm order flow aligns with CHOCH + liquidity intent.

### üîπ Order Flow Confidence Adjustment
```yaml
OrderFlow_Confidence_Adjustment:
  cvd_agreement: +5
  absorption_zone_present: +10
  delta_divergence_detected: -10
```
Links order-flow strength directly to the confluence scoring system, making execution more adaptive to true liquidity context.

---

## ‚ö° 7Ô∏è‚É£ AUTO EXECUTION SAFETY
- Dual confirmation: confluence ‚â• 70 AND (choch_bull or choch_bear).
- Plans expire after 24 h if price not near entry.
- Disable breakout bias in SL/TP manager.
- Reject trades under abnormal volatility spikes.

### üîπ Volatility Fallback Condition
```yaml
Fallback_Condition:
  if ATR_data_unavailable: use_vol_trend = "stable"
  if VWAP_data_unavailable: switch_to_mean_reversion_mode = true
```
Ensures the system continues functioning if volatility or VWAP data are missing during thin weekend liquidity.

---

## üß© 8Ô∏è‚É£ SESSION ADAPTATION
| Time (UTC) | Behavior | Strategy Priority |
|-------------|-----------|--------------------|
| Fri 23:00 ‚Äì Sat 06:00 | Asian retail sweep | Liquidity Sweep Reversal |
| Sat 06:00 ‚Äì Sat 18:00 | Range compression | Mean Reversion Range Scalp |
| Sat 18:00 ‚Äì Sun 12:00 | Dead zone | Micro-Scalp / Wait |
| Sun 12:00 ‚Äì Sun 22:00 | Pre-CME sweep | Liquidity Sweep Reversal |
| Sun 22:00 ‚Äì Mon 03:00 | CME gap reversion | VWAP Deviation Reversion |

### üîπ Weekend Micro-Session Awareness
```yaml
Weekend_SubSessions:
  - name: "Asian Retail Burst"
    time: "Fri 23:00 ‚Äì Sat 06:00"
    bias: "Sweep Reversal"
  - name: "Low-Liquidity Range"
    time: "Sat 06:00 ‚Äì Sun 12:00"
    bias: "Mean Reversion"
  - name: "CME Anticipation"
    time: "Sun 12:00 ‚Äì Mon 03:00"
    bias: "VWAP Reversion"
```

---

## üß© 9Ô∏è‚É£ EXIT STRATEGY
Weekend exits require faster protection:
- Breakeven: 25 %  
- Partial Profit: 50 %  
- Trailing Stop: Hybrid ATR+VIX  
- VIX > 20 ‚Üí widen SL √ó1.3  
- Volatility < 0.8 ATR baseline ‚Üí disable trailing.

### üîπ Adaptive VWAP Bands
```yaml
VWAP_Adaptive_Thresholds:
  low_vol: 0.8
  normal: 1.0
  high_vol: 1.3
```

---

## üîí 10Ô∏è‚É£ RISK MANAGEMENT
| Parameter | Setting |
|------------|----------|
| Max risk per trade | 1.5 % |
| Lot cap | ‚â§ 0.02 |
| Correlated USD exposure | Disallowed with XAUUSDc |
| Position size multiplier | 0.6 |
| Stop distance multiplier | 1.2 |
| Avoid stacking correlated scalps | ‚úÖ |

---

## üîÑ 11Ô∏è‚É£ RE-ENTRY & AUTO-DEACTIVATION
- Plans auto-expire Mon 03:00 UTC OR after 24h if price not near entry (0.5% tolerance).
- System reloads weekday profile (London Breakout logic).
- Open trades automatically transition to weekday Intelligent Exit Management.

### üîπ Transition Handling
- Weekend trades (classified as "WEEKEND" type) automatically transition to weekday parameters when weekend ends (Mon 03:00 UTC).
- Transition logic:
  * Reclassifies WEEKEND trades to SCALP or INTRADAY based on current conditions
  * Updates exit parameters accordingly:
    - SCALP: 25% breakeven, 40% partial, 70% close, 0.7x trailing
    - INTRADAY: 30% breakeven, 60% partial, 50% close, 1.0x trailing
  * Transition occurs automatically - no manual intervention required
  * Trades opened just before weekend (e.g., Friday 22:00 UTC) are correctly classified as WEEKEND if weekend is active when rule is created

---

## üß© 12Ô∏è‚É£ SUMMARY
| Category | Setting |
|-----------|----------|
| Active Time | Fri 23:00 ‚Äì Mon 03:00 UTC |
| Allowed Strategies | Range Scalp ¬∑ VWAP Reversion ¬∑ Liquidity Sweep Reversal ¬∑ Micro-Scalp |
| Disabled Strategies | Breakout ¬∑ Trend Continuation |
| Entry Conditions | Confluence ‚â• 70 (DEFAULT), CHOCH + VWAP RECOMMENDED (overridable), ATR state Stable/Cautious RECOMMENDED (overridable) |
| ATR Filter | < 1.0 = trade, > 1.3 = wait |
| CME Gap Logic | Enabled |
| Risk | 40 % reduced position size |
| Exit Logic | Adaptive Hybrid ATR+VIX |
| London Breakout | Disabled during weekend |
