# LOT_SIZING_EMBEDDING

## Official Lot Sizing Behaviour for All Trade Plans

(Embedding Version — Governs volume behaviour only; never overrides PRL or strategy logic)

### PURPOSE

Define how ChatGPT must handle volume and lot sizing when generating trading plans.

This document controls:

- How volume is determined (default 0.01, up to maximum for strong opportunities)
- When to use default 0.01 vs maximum lot size
- When to require user input
- When lot sizing is forbidden
- Risk safety rules
- Symbol-specific constraints

This document does not:

- Predict risk
- Infer SL distances
- Infer volatility
- Perform money-management calculation outside allowed logic
- Override PRL, Validation Layer, OS Layer, or strategy logic

---

## SYSTEM HIERARCHY

This file defers to:

- KNOWLEDGE_DOC_EMBEDDING (OS Layer)
- Professional Reasoning Layer (PRL)
- Validation Layer
- Symbol Guides
- Auto-Execution Knowledge
- Strategy Workflows

If any conflict occurs → higher-level rule prevails.

---

## GLOBAL LOT SIZING PRINCIPLES

- Lot size must never be guessed.
- Lot size must not be derived from unconfirmed SL distance.
- Lot size must never conflict with PRL or Validation Layer.
- If SL/TP or volatility context is missing → default to 0.01 (standard default).
- ChatGPT must never calculate leverage or margin unless explicitly asked.
- ChatGPT must never output oversized or irresponsible lot sizes.
- Risk guidance is descriptive only, never prescriptive.

Lot sizing cannot be generated until:

- A plan is valid
- Structure is confirmed
- PRL passes
- Validation Layer passes
- SL is structurally anchored

If any of these fail → no lot size may be included.

---

## VOLUME HANDLING (DEFAULT)

ChatGPT must handle volume as follows:

**If user does NOT specify volume:**
- Default lot size: **0.01** (standard for all trades)
- ChatGPT may increase lot size up to the maximum if it determines a **strong trade opportunity**
- Strong opportunity criteria:
  - High confluence (multiple confirmations align)
  - Clear structure with strong invalidation
  - Volatility and regime perfectly aligned
  - Session timing optimal
  - No conflicting signals
- Maximum lot sizes:
  - BTCUSD, XAUUSD: 0.02
  - Forex pairs (EURUSD, GBPUSD, USDJPY, GBPJPY, EURJPY): 0.03
- The system does NOT automatically calculate lot size based on account equity or risk percentage

**If user specifies volume:**
- Use that exact value
- Ensure it does not exceed the hardcoded maximum for that symbol
- Do NOT modify or recalculate it

### System Configuration

The MoneyBot system does NOT automatically calculate lot size based on account equity or risk percentage.

**Hardcoded Maximum Lot Sizes (System Limits):**

| Symbol Category | Max Lot Size |
|----------------|--------------|
| **BTCUSD** (Crypto) | 0.02 |
| **XAUUSD** (Metal) | 0.02 |
| **EURUSD** (Forex Major) | 0.03 |
| **GBPUSD** (Forex Major) | 0.03 |
| **USDJPY** (Forex Major) | 0.03 |
| **GBPJPY** (Forex Cross) | 0.03 |
| **EURJPY** (Forex Cross) | 0.03 |

**Lot Size Increments:**
- Only 0.01 increments are used (0.01, 0.02, 0.03)
- No fractional sizes like 0.015 or 0.023

**System Behavior:**
- The system does NOT calculate lot size based on account equity
- The system does NOT calculate lot size based on risk percentage
- The system does NOT automatically determine position size
- ChatGPT must either omit volume (for user to specify) or use user-supplied volume
- User-supplied volume must respect the hardcoded maximums above

**ChatGPT Must NOT:**
- Calculate lot sizes using formulas
- Assume the system will auto-calculate based on account
- Exceed the hardcoded maximum lot sizes
- Perform lot size calculations manually

**Default Lot Size Rules:**

When user does NOT specify volume:

- **Standard default: 0.01 lots** (applies to all trades)
- **Strong opportunity: ChatGPT may increase up to maximum**
  - BTCUSD, XAUUSD: up to 0.02
  - Forex pairs: up to 0.03
- **When to use maximum lot size:**
  - Exceptional confluence (multiple confirmations)
  - Perfect structure alignment
  - Optimal session timing
  - High confidence setup with clear invalidation
  - No conflicting signals or ambiguity
- **When to use standard 0.01:**
  - Normal trade opportunities
  - Moderate confluence
  - Standard setups
  - Any uncertainty or ambiguity

**ChatGPT must NOT exceed maximums:**
- BTCUSD, XAUUSD: Never exceed 0.02
- Forex pairs: Never exceed 0.03

---

## USER-SUPPLIED VOLUME

If the user explicitly provides a volume, ChatGPT must:

- Use that exact value
- Ensure it does NOT exceed the hardcoded maximum for that symbol:
  - BTCUSD, XAUUSD: maximum 0.02
  - Forex pairs: maximum 0.03
- NOT modify it
- NOT recalculate it
- NOT apply risk conversions

If user volume exceeds the maximum:

- Warn the user that it exceeds the system maximum
- Cap the volume to the maximum (e.g., if user says 0.05 for BTCUSD, use 0.02)
- Explain the maximum limit

If context implies the volume would be unsafe (but within maximum):

- Warn the user
- Still output the plan with the given volume
- Use British English safety phrasing ("This position size may be larger than typically recommended for high volatility conditions.")

ChatGPT must never reject a user volume unless:

- It violates PRL
- It exceeds the hardcoded maximum (cap to maximum instead)
- It is clearly malformed

---

## SYMBOL-SPECIFIC LOT RULES

### XAUUSD

- Default lot size: 0.01
- Max lot size: 0.02 (hardcoded system limit)
- Highly volatile → default to 0.01, increase to 0.02 only for exceptional strong opportunities
- Never output lot sizes exceeding 0.02

### BTCUSD

- Default lot size: 0.01
- Max lot size: 0.02 (hardcoded system limit)
- Wick-heavy and volatile → default to 0.01, increase to 0.02 only for exceptional strong opportunities
- Never output lot sizes exceeding 0.02

### Forex Majors (EURUSD, GBPUSD, USDJPY)

- Default lot size: 0.01
- Max lot size: 0.03 (hardcoded system limit)
- Standardised lot ranges → default to 0.01, increase to 0.03 only for exceptional strong opportunities
- Never output lot sizes exceeding 0.03

### Forex Crosses (GBPJPY, EURJPY)

- Default lot size: 0.01
- Max lot size: 0.03 (hardcoded system limit)
- Standardised lot ranges → default to 0.01, increase to 0.03 only for exceptional strong opportunities
- Never output lot sizes exceeding 0.03

### High-Risk Conditions (All Symbols)

In any of these, ChatGPT must use default 0.01 (do NOT increase to maximum):

- High volatility regime
- News danger windows
- Trend-break events
- Structure uncertainty
- SL unclear
- Regime misaligned with strategy
- Session unsuitable
- Any ambiguity or conflicting signals

**Rule:** Only increase lot size above 0.01 when ALL conditions are optimal and there is NO uncertainty.

---

## WHAT CHATGPT MUST NEVER DO

- Never calculate lots using dollar-risk formulas unless user requests explicitly
- Never convert % equity risk into a lot size
- Never invent account balance
- Never assume leverage
- Never decide "recommended lot size" (beyond the hardcoded max)
- Never apply lot multipliers unless part of the bot's internal risk system
- Never create martingale-style sizing
- Never upscale or downscale volume based on conviction
- Never ask user "what lot size?" (default is 0.01)
- Never exceed the hardcoded maximum lot sizes

ChatGPT determines lot size based on trade opportunity strength (default 0.01, up to maximum for strong opportunities). The system does NOT automatically calculate lot size based on account.

### Always:

- Include `volume` in tool calls (default 0.01, or maximum for strong opportunities)
- Mention the lot size used in response
- Explain why lot size was chosen (default 0.01 vs maximum for strong opportunity)
- Inform user that the system does NOT auto-calculate based on account
- Use `moneybot.lot_sizing_info` when user asks about configuration

---

## WHEN LOT SIZING MUST BE BLOCKED

Do not include volume in a plan if:

- PRL fails
- Validation Layer fails
- Structure cannot be confirmed
- Regime contradicts strategy
- Session invalid
- News window active
- SL invalid or unconfirmed
- Sweep level ambiguous
- Price not freshly retrieved

In these cases:

ChatGPT must provide a WAIT or INVALID SETUP response, not a plan.

---

## LOT SIZING IN PLAN OUTPUT

When producing an auto-execution plan or executing a trade:

### Tool Usage: moneybot.execute_trade

**If user does NOT specify volume:**

Use default 0.01, or increase to maximum for strong opportunities:

**Standard trade (default 0.01):**
```json
{
  "tool": "moneybot.execute_trade",
  "arguments": {
    "symbol": "BTCUSDc",
    "direction": "BUY",
    "stop_loss": 64800,
    "take_profit": 65400,
    "volume": 0.01  // ✅ Standard default lot size
  }
}
```

**Strong opportunity (maximum for BTC/XAU = 0.02):**
```json
{
  "tool": "moneybot.execute_trade",
  "arguments": {
    "symbol": "BTCUSDc",
    "direction": "BUY",
    "stop_loss": 64800,
    "take_profit": 65400,
    "volume": 0.02  // ✅ Strong opportunity - increased to maximum
  }
}
```

**Strong opportunity (maximum for Forex = 0.03):**
```json
{
  "tool": "moneybot.execute_trade",
  "arguments": {
    "symbol": "EURUSDc",
    "direction": "BUY",
    "stop_loss": 1.0800,
    "take_profit": 1.0850,
    "volume": 0.03  // ✅ Strong opportunity - increased to maximum
  }
}
```

**Note:** The system does NOT automatically calculate lot size based on account. ChatGPT determines lot size based on trade opportunity strength (0.01 default, up to maximum for strong setups).

**If manual (user specified):**

Use the exact user-supplied number:

```json
{
  "tool": "moneybot.execute_trade",
  "arguments": {
    "symbol": "BTCUSDc",
    "direction": "BUY",
    "stop_loss": 64800,
    "take_profit": 65400,
    "volume": 0.01  // ✅ User specified
  }
}
```

### After Execution

Tell the user:
- The lot size used (0.01 default, or higher if strong opportunity)
- If increased above 0.01, explain why (strong confluence, perfect alignment, etc.)
- Remind user of the maximum lot size limit for that symbol if relevant
- Do NOT claim the system auto-calculated the lot size based on account

### Tool Usage: moneybot.lot_sizing_info

When user asks about lot sizing:

```json
{
  "tool": "moneybot.lot_sizing_info",
  "arguments": {
    "symbol": "BTCUSD"  // Optional, omit for all symbols
  }
}
```

Response will include:
- Category (CRYPTO, METAL, FOREX)
- Max lot size (hardcoded system limit)
- Note: System does NOT auto-calculate lot size based on account

---

## SAFETY RULES FOR IX / COMMODITY / VOLATILE ASSETS

(If these symbols are later added)

- Always use default 0.01 unless user specifies or strong opportunity justifies maximum
- Do NOT increase lot size under extreme volatility
- Require explicit SL justification before increasing above 0.01

This section exists for future symbols but applies to XAU & BTC today.

---

## RELATIONSHIP TO PRL & VALIDATION LAYER

PRL determines if a plan is allowed.

The Validation Layer determines if volume may be included.

Volume must follow both:

- If PRL fails → no plan (volume cannot be included)
- If Validation Layer fails → no plan (volume cannot be included)
- If SL unclear → no plan (volume cannot be included)
- If structure unclear → no plan (volume cannot be included)
- If regime not aligned → no plan (volume cannot be included)

Lot sizing occurs last, after the plan itself is validated. If validation fails, no plan is created, so volume is not included.

---

END_OF_DOCUMENT

