# ChatGPT_Knowledge_Volatility_Regime_Trading_EMBEDDING
# OFFICIAL VOLATILITY & REGIME CLASSIFICATION SYSTEM

# SCOPE
Defines volatility → regime mapping, volatility-state interpretation,  
and strategy alignment under the updated Professional Reasoning Layer (PRL).

This file MUST defer to:
1. KNOWLEDGE_DOC_EMBEDDING (OS Layer)  
2. Professional Reasoning Layer (PRL)  
3. UPDATED_GPT_INSTRUCTIONS_FIXED  
4. Auto-Execution Knowledge & Strategy Docs  

This file does NOT define:
- plan formatting  
- execution templates  
- price logic  
- structure logic  
- liquidity logic  

---

# 1. REQUIREMENTS & DEPENDENCIES

volatility_system_requirements:
  - fresh_price_required_before_volatility_logic
  - tool: moneybot.getCurrentPrice (MUST use before volatility analysis)
  - parameters: `symbol` (string, required)
  - example: `moneybot.getCurrentPrice(symbol: "XAUUSD")`
  - volatility_must_not_be_guessed
  - indicators_must_be_tool_valid_or_user_provided
  - Analysis tool: moneybot.analyse_symbol_full (provides volatility data)
  - parameters: `symbol` (string, required)
  - returns: ATR, BB width, volatility state, volatility regime in `response.data`
  - example: `moneybot.analyse_symbol_full(symbol: "XAUUSD")`
  - volatility_state_must_pass_PRL_stage_4 (volatility_structure_conflict_check)
  - volatility_must_align_with_regime_and_strategy

volatility_interacts_with:
  - structure  
  - liquidity  
  - regime  
  - session  
  - enrichment signals  

conflict_resolution:
  - volatility_priority_over_structure_when_conflicting  
  - regime_priority_over_strategy  
  - PRL_priority_over_all  

---

# 1.5. CONFLUENCE SCORE INTEGRATION

confluence_regime_integration:
  BTCUSDc_M1_timeframe:
    - volatility_regime_directly_affects_confluence_scores
    - detection_method: RegimeDetector (accurate_multi_timeframe_analysis)
    - fallback: lightweight_method_if_RegimeDetector_unavailable_or_fails
    - STABLE_regime: volatility_suitability_scores_80_points
    - TRANSITIONAL_regime: volatility_suitability_scores_75_points
    - VOLATILE_regime: volatility_suitability_scores_85_points (higher_than_STABLE)
    - why_VOLATILE_scores_higher: high_volatility_can_be_profitable_for_BTC
    - affects_overall_M1_confluence: 20_percent_weight
    - example: BTC_in_VOLATILE_regime → M1_confluence_volatility_suitability_85_100
    - RegimeDetector_benefits:
      - more_accurate_regime_classification
      - analyzes_ATR_ratios_BB_width_ADX_volume_patterns
      - provides_confidence_scores
      - automatic_fallback_ensures_reliability
    - note: XAU_and_others_use_session_based_volatility_tier_not_regime
    - reference: ChatGPT_Knowledge_Confluence_Calculation_EMBEDDING.md

---

# 2. VOLATILITY STATE CLASSIFICATION

volatility_states:
  LOW_COMPRESSION:
    characteristics:
      - ATR decreasing
      - BB width decreasing
      - small bodies
      - inside bars
      - liquidity building
    valid_strategies:
      - compression_breakout_prep
      - inside_bar_trap
      - sweep_CHOCH
      - micro_scalps
    avoid:
      - trend_continuation
      - breakout_chasing

  STABLE_RANGING:
    characteristics:
      - ATR stable
      - BB stable width
      - clean two-sided flow
    valid_strategies:
      - VWAP_mean_reversion
      - range_sweeps
      - OB_FVG_range_fades
      - micro_scalps
    avoid:
      - unconfirmed_breakouts
      - trend_continuation_without_structure

  EXPANDING_BREAKOUT:
    characteristics:
      - ATR expanding
      - BB expansion
      - displacement candles
      - directional intent forming
    valid_strategies:
      - breakout_continuation
      - momentum_expansion
      - breaker_FVG_continuation
    avoid:
      - countertrend_scalps
      - VWAP_fades

  HIGH_EXTREME:
    characteristics:
      - extreme ATR
      - extreme BB width
      - wide impulsive candles
      - liquidity hunts
      - structural disorder
    valid_strategies:
      - sweep_CHOCH_reversals
      - fade_failed_breakouts
      - volatility_traps
    avoid:
      - mid_range_entries
      - unstructured_continuations

---

# 2.5. TICK-BASED VOLATILITY ENHANCEMENT NEW

tick_volatility_integration:
  - tick_metrics.realized_volatility is MORE ACCURATE than ATR
  - Use tick_metrics.volatility_ratio for regime transition detection
  - tick-based volatility detects changes 3-5x faster than candle-based ATR
  
volatility_regime_with_ticks:
  LOW_COMPRESSION:
    tick_indicators:
      - volatility_ratio < 0.7
      - tick_rate declining
      - spread.std low (stable spreads)
    confirmation: tick_metrics confirms compression before breakout
    
  EXPANDING_BREAKOUT:
    tick_indicators:
      - volatility_ratio > 1.3
      - tick_rate increasing
      - spread.widening_events > 3
    confirmation: tick_metrics validates breakout is real, not false
    
  HIGH_EXTREME:
    tick_indicators:
      - volatility_ratio > 2.0
      - absorption.count high
      - spread.std elevated
    confirmation: tick_metrics warns of regime instability

tick_volatility_override:
  - If tick_metrics.volatility_ratio contradicts ATR-based regime:
    - tick_metrics takes priority (more recent data)
    - Note contradiction in analysis
    - Adjust confidence by -10%

tick_volatility_interpretation:
  volatility_ratio_thresholds:
    - volatility_ratio > 1.3: Volatility expanding -> +10 confluence if aligned with breakout structure
    - volatility_ratio < 0.7: Volatility contracting -> +10 confluence if aligned with range strategy
    - volatility_ratio 0.8-1.2: Stable volatility -> 0 (neutral)
  
  realized_volatility_usage:
    - tick_metrics.realized_volatility is MORE ACCURATE than ATR
    - Use for regime detection instead of ATR when available
    - Detects regime changes 3-5x faster than candle-based ATR
  
  timeframe_usage:
    - M5: Execution precision, entry timing
    - M15: Setup validation, structure confirmation
    - H1: Session context, volatility state
    - previous_hour: Recent regime context
    - previous_day: Baseline comparison

---

# 3. VOLATILITY ↔ STRUCTURE RULES (MANDATORY)

volatility_structure_interaction:
  - volatility_must_confirm_structure
  - BOS + stable_volatility → treat_as_range  
  - BOS + expanding_volatility → treat_as_trend  
  - compression_overrides_all_strategies → scalp_or_wait  

volatility_structure_conflict_rule:
  - structure_breakout_but_volatility_collapsing → invalid  
  - volatility_expanding_but_structure_absorption → invalid  
  - final_decision: volatility_priority  

no_structure_invention:
  - do_not_infer_CHOCH_BOS_sweeps  
  - do_not_infer_trend_reversal  
  - structure_must_be_from_tools_or_user  

---

# 4. VOLATILITY → STRATEGY MAPPING

volatility_strategy_map:

  LOW_COMPRESSION:
    - breakout_prep
    - IB_trap
    - fakeout_reversal
    - micro_scalp
    avoid:
      - trending_strategies
      - breakout_followthrough

  STABLE_RANGING:
    - VWAP_MR
    - PDH_PDL_sweeps
    - range_OB_FVG_fades
    - range_micro_scalps
    avoid:
      - breakout_chasing

  EXPANDING_BREAKOUT:
    - momentum_continuation
    - breaker_continuation
    - trend_pullback_entries
    avoid:
      - countertrend_reversions

  HIGH_EXTREME:
    - liquidity_hunt_reversal
    - sweep_CHOCH_reversal
    - fading_failed_breakouts
    avoid:
      - continuation_mid_range

strategy_invalid_when:
  - volatility_mismatch
  - regime_conflict
  - structure_conflict
  - invalid_session_window

---

# 5. SESSION × VOLATILITY FRAMEWORK

session_volatility_rules:

  asian_session:
    - typically_low_or_stable
    - valid: MR, VWAP, sweeps, micro-scalps
    - avoid: breakouts, trend_continuations

  london_open:
    - volatility_spike_expected
    - valid: sweep_expansion, volatility_traps
    - avoid: mid_range_entries

  london_session:
    - expanding_volatility
    - valid: structured_trend_continuation, clean_breakouts

  new_york_open:
    - highest_volatility
    - valid: continuation, breakout_followthrough
    - avoid: weak_range_scalps

  new_york_late:
    - volatility_fades
    - valid: MR_only
    - avoid: breakouts

session_invalid_when:
  - session_conflicts_with_strategy_family
  - liquidity_not_positioned_for_session
  - volatility_extreme_outside_session_behaviour

---

# 6. LIQUIDITY × VOLATILITY INTEGRATION

liquidity_volatility_alignment:
  - sweeps_require_displacement_plus_volatility_confirmation  
  - volatility_spike_after_sweep_signal_valid_reversal  
  - breakout_requires_expansion_volatility  
  - mean_reversion_requires_contraction_volatility  

liquidity_invalid_when:
  - messy_internal_structure  
  - target_not_clear  
  - sweep_without_displacement  

---

# 7. AUTO-EXEC VALIDATION (VOLATILITY VERSION)

validation_requires:
  - regime_consistency  
  - volatility_alignment  
  - structure_confirmation  
  - liquidity_alignment  
  - session_alignment  
  - invalidation_level_defined  
  - not_mid_range  

If ANY fail:
  - WAIT  
  - or micro_scalp_only  

---

# 8. OVERRIDE STATEMENTS

override_policy:
  - PRL supersedes all prior volatility rules  
  - Regime classification = authoritative  
  - Volatility modifies regime, does not create new regimes  
  - Breakout strategies MUST follow LONDON_BREAKOUT_ANALYSIS_WORKFLOW_EMBEDDED  
  - Auto-Execution Validation Layer overrides volatility suggestions  

---

# 9. SYMBOL-SPECIFIC VOLATILITY BEHAVIOUR

XAUUSD:
  - high_sensitivity_to_vol_spikes  
  - requires_strict_structure_confirmation  
  - micro_alignment_allowed  

BTCUSD:
  - dominance_of_liquidity_hunts  
  - derivatives_drive_volatility  
  - asia_low_vol → london_sweep → ny_expansion pattern  

FX_MAJORS:
  - stable_volatility  
  - rely_more_on_structure_and_session  
  - less prone_to_extreme_volatility_spikes  

---

# 10. MODEL OUTPUT RESTRICTIONS

output_rules:
  - do_not_output_volatility_logic_unless_user_requests  
  - do_not_apply_volatility_logic_to_feature_questions  
  - do_not_invent_indicators  
  - keep_terms_atomic_and_deterministic  
  - no_examples  
  - no_prediction  

---

# END_OF_DOCUMENT
